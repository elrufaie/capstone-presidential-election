<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.72.0">
  <title>US President Elections Forecast</title>

  <link rel="canonical" href="https://v5.getbootstrap.com/docs/5.0/examples/starter-template/">

  <link rel="stylesheet" href="https://cdn.bokeh.org/bokeh/release/bokeh-0.12.14.min.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-0.12.14.min.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.bokeh.org/bokeh/release/bokeh-tables-0.12.14.min.css" type="text/css">
  <link rel="icon" href="https://raw.githubusercontent.com/ehuang13/w210-presidential-election/master/harith/sample-bokeh-app/static/favicon.ico" >
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <!-- VENDOR CSS -->
  <link rel="stylesheet" href="../static/assets/vendor/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../static/assets/vendor/linearicons/style.css">
  <link rel="stylesheet" href="../static/assets/vendor/metisMenu/metisMenu.css">
  <link rel="stylesheet" href="../static/assets/vendor/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css">
  <link rel="stylesheet" href="../static/assets/vendor/chartist/css/chartist.min.css">
  <link rel="stylesheet" href="../static/assets/vendor/chartist-plugin-tooltip/chartist-plugin-tooltip.css">
  <link rel="stylesheet" href="../static/assets/vendor/toastr/toastr.min.css">
  <!-- MAIN CSS -->
  <link rel="stylesheet" href="../static/assets/css/main.css">
  <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
  <!-- <link rel="stylesheet" href="../static/assets/css/demo.css"> -->
  <!-- GOOGLE FONTS -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
  <!-- ICONS -->
  <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">

  <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/site.css') }}">

  <!-- Bootstrap core CSS -->
  <link href="../static/css/bootstrap.min.css" rel="stylesheet">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>


  <!-- Custom styles for this template -->
  <link href="../static/css/starter-template.css" rel="stylesheet">
</head>
<body>

  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto mb-2 mb-md-0">
          <li class="nav-item active">
            <a class="nav-link" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container-xl">

      <center><h1>US Presidential Elections Forecast</h1></center>

        <p></p>
		
		<div class = "progress" style="height:40px; border-radius: 0; background-color: #0015bc;">
			<div class = "progress-bar" role = "progressbar" aria-valuenow = "60"
				aria-valuemin = "0" aria-valuemax = "538" style = "height:40px;width:60%;background-color: #e9141d">
				<span class = "sr-only">60% Complete</span>
			</div>
		</div>

        <div class="row">
          <!-- <div class="col-3">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
              <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">Home</a>
              <a class="nav-link" id="v-pills-summary-tab" data-toggle="pill" href="#v-pills-summary" role="tab" aria-controls="v-pills-summary" aria-selected="true">Sentiment Summary</a>
              <a class="nav-link" id="v-pills-economy-tab" data-toggle="pill" href="#v-pills-economy" role="tab" aria-controls="v-pills-economy" aria-selected="false">Sentiment: Economy</a>
              <a class="nav-link" id="v-pills-party-tab" data-toggle="pill" href="#v-pills-party" role="tab" aria-controls="v-pills-party" aria-selected="false">Sentiment: Party</a>
              <a class="nav-link" id="v-pills-environment-tab" data-toggle="pill" href="#v-pills-environment" role="tab" aria-controls="v-pills-environment" aria-selected="false">Sentiments: Environment</a>
              <a class="nav-link" id="v-pills-health-tab" data-toggle="pill" href="#v-pills-health" role="tab" aria-controls="v-pills-health" aria-selected="false">Sentiment: Health</a>
              <a class="nav-link" id="v-pills-jobs-tab" data-toggle="pill" href="#v-pills-jobs" role="tab" aria-controls="v-pills-jobs" aria-selected="false">Sentiment: Jobs</a>
            </div>
          </div> -->
          <div class="col-6">
            <div class="tab-content" id="v-pills-tabContent">
              <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">

               {{ map_div|safe }}
               {{ map_script|safe }}


             </div>
          </div>
        </div>
          <div class="col-12">
            <!-- DETAILS -->
            <div class="dashboard-section no-margin">
              <div class="section-heading clearfix">
                <h2 class="section-title"><i class="fa fa-user-circle"></i> State Details: <span id ='state'></span> </h2>
              </div>
              <div class="panel-content">
                <div class="row">
                  <div class="col-md-3 col-sm-6">
                    <p class="metric-inline"><i class="fa fa-thumbs-o-up"></i><span id ='top_issue'></span><span>TOP ISSUE</span></p>
                  </div>
                  <div class="col-md-3 col-sm-6">
                    <p class="metric-inline"><i class="lnr lnr-upload"></i><span id ='boost'></span><span>MODEL BOOST</span></p>
                  </div>
                  <div class="col-md-3 col-sm-6">
                    <p class="metric-inline"><i class="lnr lnr-users"></i><span id ='win_margin'></span><span>MARGIN OF VICTORY</span></p>
                  </div>
                  <div class="col-md-3 col-sm-6">
                    <p class="metric-inline"><i class="lnr lnr-users"></i><span id='party'></span><span>WON PREVIOUS ELECTION</span></p>
                  </div>
                </div>
              </div>
            </div>
            <div class="card" style="width: 18rem;">
              <div class="card-header">
                ISSUE BY CANDIDATE
              </div>
              <table class="card-table table">
                <thead>
                  <tr>
                    <th scope="col">Issue</th>
                    <th scope="col">Leading Candidate</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Climate Change</td>
                    <td><span id ='issues_climate'></span></td>
                  </tr>
                  <tr>
                    <td>Economy</td>
                    <td><span id ='issues_economy'></span></td>
                  </tr>
                  <tr>
                    <td>Health Care</td>
                    <td><span id ='issues_healthcare'></span></td>
                  </tr>
                  <tr>
                    <td>Immigration</td>
                    <td><span id ='issues_immigration'></span></td>
                  </tr>
                </tbody>
              </table>
            </div>
        <!-- END DETAILS -->
          </div>
        </div>
      </div>
    </main>
    <!-- </div> -->

  </main><!-- /.container -->

  <script src="../static/js/bootstrap.bundle.min.js"></script>

  <!-- Javascript -->
  <script src="../static/assets/vendor/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.1.1.min.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-gl-2.1.1.min.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.1.1.min.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.1.1.min.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.1.1.min.js"></script>
  <!-- <script src="../static/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="../static/assets/vendor/metisMenu/metisMenu.js"></script>
  <script src="../static/assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
  <script src="../static/assets/vendor/jquery-sparkline/js/jquery.sparkline.min.js"></script>
  <script src="../static/assets/vendor/bootstrap-progressbar/js/bootstrap-progressbar.min.js"></script>
  <script src="../static/assets/vendor/chartist/js/chartist.min.js"></script>
  <script src="../static/assets/vendor/chartist-plugin-tooltip/chartist-plugin-tooltip.min.js"></script>
  <script src="../static/assets/vendor/chartist-plugin-axistitle/chartist-plugin-axistitle.min.js"></script>
  <script src="../static/assets/vendor/chartist-plugin-legend-latest/chartist-plugin-legend.js"></script>
  <script src="../static/assets/vendor/toastr/toastr.js"></script>
  <script src="../static/assets/scripts/common.js"></script> -->
  <script>

    var currentYearSelection = '2004';
    var currentFipsSelection = '4';

    //$('#test_button').click(function () {
      function updateDetails(stateFips, year){

        if (year != null){
          currentYearSelection = year;
        }

        if (stateFips != null){
          currentFipsSelection = stateFips;
        }

        console.log('state fip', currentFipsSelection)
        console.log('year', currentYearSelection)

        var detailsUrlPath = '/details/' + currentFipsSelection + '?year=' + currentYearSelection

        var issuesUrlPath = '/issues/' + currentFipsSelection + '?year=' + currentYearSelection

      $.ajax({
        type: 'GET',
        url: detailsUrlPath,
        success: function (response) {
          $('#state').text(response['details_state_text']).css("font-weight","Bold");
          $('#top_issue').text(response['details_top_issue']).css("font-weight","Bold");
          $('#boost').text(response['details_boost']).css("font-weight","Bold");
          $('#win_margin').text(response['details_win_margin']).css("font-weight","Bold");
          $('#party').text(response['details_party']).css("font-weight","Bold");
        }
      });

      $.ajax({
        type: 'GET',
        url: issuesUrlPath,
        success: function (response) {
          $('#issues_immigration').text(response['Immigration']).css("font-weight","Bold");
          $('#issues_healthcare').text(response['Health Care']).css("font-weight","Bold");
          $('#issues_economy').text(response['Economy']).css("font-weight","Bold");
          $('#issues_climate').text(response['Climate']).css("font-weight","Bold");
        }
      });
    }
    //});
  </script>

</body>
</html>
